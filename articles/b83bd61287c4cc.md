---
title: "ã‚³ãƒãƒ³ãƒ‰ãƒ©ãƒ³ãƒãƒ£ãƒ¼ \"Ueli\" ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºå…¥é–€"
emoji: "ğŸ•Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ueli", "typescript"]
published: false
---
# ã¯ã˜ã‚ã«
https://github.com/oliverschwendener/ueli
å…ˆæ—¥ã€æ‰€å±ã—ã¦ã„ã‚‹ Discord Server ã§è©±é¡Œã«ãªã£ã¦ãŠã‚Šèˆˆå‘³ãŒæ¹§ã„ãŸãŸã‚ã€æš‡ãªæ™‚é–“ã‚’ä½¿ã£ã¦ Contribute (æ–°ã—ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œæˆ) ã‚’ã—ã¦ã¿ã¾ã—ãŸã€‚
é©å½“ã«èª¿ã¹ãŸæ„Ÿã˜ã ã¨ã€æ—¥æœ¬èªã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œæˆã®æ–‡çŒ®ã©ã“ã‚ã‹ã€å…¬å¼ document ã™ã‚‰å­˜åœ¨ã—ãªã„æ„Ÿã˜ã ã£ãŸã®ã§ã€è¦šæ›¸ã¨ã—ã¦ã‹ã„ã¦ãŠãã¾ã™ã€‚

# Ueli ã¨ã¯
ã¾ãš Ueli ã«ã¤ã„ã¦å­˜çŸ¥ã‚ã’ãªã„æ–¹ã‚‚å¤šã„ã¨æ€ã†ã®ã§ã€èª¬æ˜ã‚’ã—ã¦ãŠãã¾ã™ã€‚
Ueli ã¨ã¯ã€Mac ã§ã„ã†ã¨ã“ã‚ã® Spotlight ã®ã‚ˆã†ãªãƒ©ãƒ³ãƒãƒ£ãƒ¼ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ç«¶åˆã¨ã—ã¦ Raycast, Alfred ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ãŒã€Ueli ã«ã¯ã“ã‚Œã‚‰ã¨ä¸€ç·šã‚’ç”»ã™ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚
ãã‚Œã¯ã€**Windows å¯¾å¿œ** ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚

ã„ã‚„ã€ãƒ‡ã‚«ã„ã§ã™ã‚ˆã€‚Windows å¯¾å¿œã£ã¦ã€‚

https://support.apple.com/ja-jp/guide/mac-help/mchlp1008/mac
https://www.raycast.com/

# æœ¬ç·¨
ã“ã“ã¯ Ueli ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚„ä½¿ã„æ–¹ã‚’èª¬æ˜ã™ã‚‹è¨˜äº‹ã§ã¯ãªã„ã®ã§ã€ãã‚Œã¯ GitHub ã‚’è¦‹ã¦ã­

## PluginType ã®è¿½åŠ 
[`src/main/plugin-type.ts`](https://github.com/oliverschwendener/ueli/blob/main/src/main/plugin-type.ts) ã¯ Plugin ã®ç¨®é¡ã‚’åˆ—æŒ™ã™ã‚‹ãŸã‚ã® enum ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚ã¾ã‚Šåˆç†çš„ã§ã‚ã‚‹ã¨ã¯æ€ãˆãªã„ã®ã§ã™ãŒã€Plugin ã®æ•°ãŒå¢—ãˆã‚‹ãŸã³ã« enum ã«åˆ—æŒ™ã•ã‚Œã‚‹è¦ç´ ãŒå¢—ãˆã¦ã„ãä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã‚„ã‚‹ã“ã¨ã¯è¦‹ã‚Œã°ã‚ã‹ã‚‹ã®ã§ã€è¦ç´ ã‚’è¿½åŠ ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ã“ã® PluginType ã¯ Class ã‚’ä½œæˆã™ã‚‹éš›ã« import ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚

## Option ã®è¿½åŠ 
[`src/common/config/`](https://github.com/oliverschwendener/ueli/tree/main/src/common/config) ã«è‡ªä½œ Plugin ç”¨ã® Option ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```
 export interface ExampleOptions {
       isEnabled: boolean;
   }
   
   export const defaultExampleOptions: ExampleOptions = {
       isEnabled: false,
   };
```

æœ€ä½é™ã® Option ãŒã“ã‚Œã ã¨ãŠã‚‚ã„ã¾ã™ã€‚ã“ã® Option ã¯ Class ã‚’ä½œæˆã™ã‚‹ã¨ãã« `isEnabled()` ãŒå‚ç…§ã™ã‚‹ã®ã§ã€import ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚

ã¾ãŸã€ã“ã“ã§ä½œæˆã—ãŸ Option ã‚’ [src/common/config/user-config-options.ts](https://github.com/oliverschwendener/ueli/tree/main/src/common/config/userconfig-options.ts) ã«è¿½åŠ ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ (`updateConfig()` ã®ãŸã‚ã«å¿…è¦) 

ã“ã“ã§ã‚„ã‚‹ã“ã¨ã¯ 2 ã¤ã§ã™: 
- `UserConfigOptions`  ã¨ã„ã† option ã‚’åˆ—æŒ™ã™ã‚‹ interface ãŒã‚ã‚‹ã®ã§ã€ãã“ã«è‡ªåˆ†ãŒä½œã£ãŸ interface ã‚’è¿½åŠ ã™ã‚‹
- `defaultUserConfigOptions`  ã¨ã„ã† option ã‚’åˆ—æŒ™ã™ã‚‹å®šæ•°ãŒã‚ã‚‹ã®ã§ã€ãã“ã«è‡ªåˆ†ãŒä½œã£ãŸ default å€¤ ã‚’è¿½åŠ ã™ã‚‹

## Plugin ã®ãŸã‚ã® Class ã®ä½œæˆ
Plugin ã¯ [`src/main/plugin/`](https://github.com/oliverschwendener/ueli/tree/main/src/main/plugins) ã«ç½®ã‹ã‚Œã¾ã™ã€‚suffix ãŒé•ã£ã¦ã‚‚ã¡ã‚ƒã‚“ã¨ import ã™ã‚Œã°å•é¡Œãªã„ã¨æ€ã„ã¾ã™ãŒã€ä¸€å¿œ `example-plugin.ts` ã®ã‚ˆã†ã«ã—ã¦ãŠãã®ãŒç„¡é›£ã§ã—ã‚‡ã†ã€‚

ã“ã® file å†…ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã« Plugin ã®ãŸã‚ã® Class ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```typescript
import { PluginType } from "../../plugin-type";
import { UserConfigOptions } from "../../../common/config/user-config-options";
import { ExecutionPlugin } from "../../execution-plugin";
import { ExampleOptions } from "../../../common/config/example-options";

import { SearchResultItem } from "../../../common/search-result-item";

export class ExamplePlugin implements ExecutionPlugin {
    public pluginType = PluginType.Example;
    constructor(private config: ExampleOptions) { }

    public isValidUserInput(userInput: string): boolean {
        return true; // æ­£è¦åŒ–ã—ãŸã„ã¨ãã¯é–¢æ•°ã«ãªã’ã‚‹
    }
    public getSearchResults(userInput: string): Promise<SearchResultItem[]> {
	// ã—ãŸã„ã“ã¨ã‚’ã‹ã
    }
    public isEnabled(): boolean {
        return this.config.isEnabled;
    }
    public execute(): Promise<void> {
	// ã—ãŸã„ã“ã¨ã‚’ã‹ã
    }
    public updateConfig(updatedConfig: UserConfigOptions): Promise<void> {
        return new Promise((resolve) => {
            this.config = updatedConfig.exampleOptions;
            resolve();
        });
    }
}
```

Class ã¯ ExecutionPlugin ã‚’å®Ÿè£…ã™ã‚‹ã®ã§ã€[UeliPlugin](https://github.com/oliverschwendener/ueli/blob/main/src/main/ueli-plugin.ts) ã¨ã„ã† interface ã®
- `pluginType` 
- `isEnabled()`
- `execute()`
- `updateConfig()` 

ã¾ãŸ UeliPlugin ã‚’ç¶™æ‰¿ã—ãŸ [ExecutionPlugin](https://github.com/oliverschwendener/ueli/blob/main/src/main/execution-plugin.ts) ã®
- `isValidUserInput()`
- `getSearchResults()` 

ã‚’å®Ÿè£…ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

## Plugin ã®è¿½åŠ 
[`src/main/production/production-search-engine.ts`](https://github.com/oliverschwendener/ueli/blob/main/src/main/production/production-search-engine.ts) ã« Plugin ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚(æ­£ç›´ã€ãªã‚“ã§ã“ã†ã„ã†å®Ÿè£…ã«ã—ã¦ã„ã‚‹ã®ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€ãŠã‚Œã‚ˆã‚Šè³¢ã„ã§ã‚ã‚ã† OSS é–‹ç™ºè€…ã®ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã ã—ã€æ­£ã—ã„ã‚“ã ã¨ãŠã‚‚ã„ã¾ã™)

ã¾ãšã€ã“ã® file å†…ã§å…ˆç¨‹ä½œæˆã—ãŸ Plugin ã® Class ã‚’ import ã—ã¾ã™ã€‚

ãã—ã¦ã€[`executionPlugins`](https://github.com/oliverschwendener/ueli/blob/a89a0b6713ce789d07c3a3105aa0d2f4616fd4bc/src/main/production/production-search-engine.ts#L202C3-L202C50) ã«ã‚ã‚‹é…åˆ—ã«è‡ªåˆ†ãŒä½œæˆã—ãŸ Plugin ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã® new æ¼”ç®—å­ã‚’ã‹ã„ã¦ã‚„ã‚‹ã ã‘ã§ã™ã€‚

## Build ã—ã¦ã¿ã‚‹
Plugin ã®ä½œæˆã«ã¤ã„ã¦ã¯ä»¥ä¸Šã§ã™ã€‚file é–“ã®åå¾©æ¨ªè·³ã³ã¯ã‚ã‚Šã¾ã—ãŸãŒã€æ›¸ãã“ã¨è‡ªä½“ã¯çµæ§‹ç°¡å˜ãã†ã§ã™ã€‚
Build ã«ã¤ã„ã¦ã¯ GitHub ã«ã‚‚ã‹ã„ã¦ã‚ã‚Šã¾ã™ãŒã€ä¸€å¿œèª¬æ˜ã—ã¦ãŠãã¾ã™ã€‚

- Node.js (v16.x.x) 
- pnpm

ã“ã‚Œã‚‰ã® 2 ã¤ãŒå¿…è¦ã§ã™ã€‚

install ã¯ã ã‚‹ã„ã®ã§ã€portable ç‰ˆã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚

```
$ pnpm exec electron-builder --dir --config electron-builder-config.yml --publish never
```
